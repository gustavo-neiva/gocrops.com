<%= content_for :title, "GoCrops! - #{current_user.farm_name}" %>

<div class="grid-dashboard__profile">

	<h2 class="section-main-title section-title">My Info</h2>
	<%= link_to "Edit Profile", edit_dashboard_profiles_path, class: "section-main-cta section-cta btn-section-cta btn__edit" %>
	<!-- PROFILE SECTION -->
	<div class="section-main user__section box-component">
    <%= cl_image_tag @user.user_avatar, class: "user__section__picture" %>
    <h3 class="user__section__title"><%= "#{@user.first_name.capitalize} #{@user.last_name.capitalize}" %></h3>
		<h4 class="user__section__subtitle">Bio</h4>
		<p 	class="user__section__description"><%= @user.bio %></p>
		<h4 class="user__section__subtitle">Contact</h4>
		<ul class="user__section__contact">
			<% if @user.email.present? %>
				<li>
					<p>
						<i class="fa fa-envelope" aria-hidden="true"></i>
						<%= @user.email %>
					</p>
				</li>
			<% end %>
		    <% if @user.phone.present? %>
		    <li>
					<p>
						<i class="fa fa-phone" aria-hidden="true"></i>
						<%= @user.phone %>
					</p>
				</li>
		    <% end %>
		</ul>
	</div>

	<h2 class="section-sidebar-title section-title">Farm</h2>
	<!-- FARM SECTION -->
	<div class="section-sidebar farm__section box-component">
    <%= cl_image_tag @user.farm_picture, class: "responsive-image farm-profile-picture" %>
		<div class="sub-section-farm-info box__section--padding">
			<h3 class="sub-section-header"><%= @user.farm_name %></h3>
			<h4 class="sub-section-title">Address</h4>
			<div id="map" style="width: 100%; height: 300px;"></div>
		</div>
	</div>
	<div class="aside box-component box__section--margin--b box__section--padding">
		<h4 class="sub-section-title__tag">Certificate</h4>
		<dl>
			<dt class="sub-section-title">Issue date</dt>
			<dd>21/10/2014</dd>
		</dl>
		<dl>
			<dt>Expiration date</dt>
			<dd>21/10/2014</dd>
		</dl>
	</div>
</div>

<% content_for(:after_js) do %>
  <script>
    $(document).ready(function() {
      var location = <%= raw @user_coordinates.to_json %>;
      var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 14,
        center: location
      });
      var marker = new google.maps.Marker({
        position: location,
        map: map
      });
    });
  </script>
<% end %>
